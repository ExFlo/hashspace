var $set=require("hsp/$set"),klass=require("hsp/klass"),$set=require("hsp/$set"),TodoCtrl=klass({$constructor:function(){$set(this,"newTodo",{title:""}),$set(this,"editTodo",{title:""}),$set(this,"allChecked",!1),$set(this,"remainingCount",1),$set(this,"doneCount",0),$set(this,"todos",[])},syncData:function(){for(var a=0,b=this.todos,c=b.length,d=0;c>d;d++)b[d].completed&&a++;$set(this,"doneCount",a),$set(this,"remainingCount",c-a),$set(this,"allChecked",a===c)},addTodo:function(){this.doneEditingAll();var a=this.newTodo;return a.title.length>0&&(this.todos.unshift({title:a.title,completed:!1,editMode:!1}),$set(a,"title",""),this.syncData()),!1},edit:function(a){this.doneEditingAll(),$set(a,"editMode",!0),$set(this.editTodo,"title",a.title)},remove:function(a){var b=this.todos.indexOf(a);this.todos.splice(b,1),this.syncData()},doneEditing:function(a){return this.editTodo.title?($set(a,"title",this.editTodo.title),$set(a,"editMode",!1)):this.remove(a),!1},doneEditingAll:function(){for(var a,b=this.todos.length-1;b>-1;b--)a=this.todos[b],a.editMode&&this.doneEditing(a)},cancelEditing:function(a){$set(this.editTodo,"title",""),$set(a,"editMode",!1)},clearDoneTodos:function(){$set(this,"todos",this.todos.filter(function(a){return!a.completed})),this.syncData()},toggleAllDone:function(){for(var a=this.allChecked,b=this.todos,c=0,d=b.length;d>c;c++)$set(b[c],"completed",a);this.syncData()}});$set(exports,"TodoUICtrl",klass({$extends:TodoCtrl,$constructor:function(){TodoCtrl.$constructor.call(this),$set(this,"filter","all")},isInFilter:function(a){var b=this.filter;return"active"===b&&a.completed?!1:"completed"!==b||a.completed?!0:!1},selectFilter:function(a){("all"===a||"active"===a||"completed"===a)&&$set(this,"filter",a)}}));