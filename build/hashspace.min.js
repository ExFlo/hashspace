require=function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({"hsp/$set":[function(a,b){b.exports=a("03OnGe")},{}],"03OnGe":[function(a,b){var c=a("hsp/json");b.exports=function(a,b,d){c.set(a,b,d)}},{"hsp/json":"iVLrWG"}],tRcUKa:[function(a,b){var c=window.document;b.exports.createDocumentFragment=function(){return c.createDocumentFragment()},b.exports.createElement=function(a){return c.createElement(a)},b.exports.createElementNS=function(a,b){return c.createElementNS(a,b)},b.exports.createTextNode=function(a){return c.createTextNode(a)},b.exports.createComment=function(a){return c.createComment(a)},b.exports.getElementById=function(a){return c.getElementById(a)},c.createEvent&&(b.exports.createEvent=function(){return c.createEvent.apply(c,arguments)}),c.createEventObject&&(b.exports.createEventObject=function(){return c.createEventObject.apply(c,arguments)})},{}],"hsp/document":[function(a,b){b.exports=a("tRcUKa")},{}],"hsp/es5":[function(a,b){b.exports=a("NxB7Fd")},{}],NxB7Fd:[function(){Array.prototype.indexOf||(Array.prototype.indexOf=function(a){"use strict";if(null==this)throw new TypeError;var b=Object(this),c=b.length>>>0;if(0===c)return-1;var d=0;if(arguments.length>1&&(d=Number(arguments[1]),d!=d?d=0:0!==d&&1/0!=d&&d!=-1/0&&(d=(d>0||-1)*Math.floor(Math.abs(d)))),d>=c)return-1;for(var e=d>=0?d:Math.max(c-Math.abs(d),0);c>e;e++)if(e in b&&b[e]===a)return e;return-1}),Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d&&a?this:a,b.concat(Array.prototype.slice.call(arguments)))};return d.prototype=this.prototype,e.prototype=new d,e})},{}],cx5bBv:[function(a,b){var c=a("hsp/klass"),d=a("./touchEvent"),e=c({NB_TOUCHES:1,$constructor:function(a,b){this.target=a,this.evthandler=b,this.touchEventMap=d.touchEventMap,this.eventsAlreadyAttached=!1,this.timerId=null,this.startData=null,this.currentData=null,this.callbackMap={},this._connectTouchEvents()},$dispose:function(){this._disconnectTouchEvents(),this.callbackMap=null},_connectTouchEvents:function(){if(!this.eventsAlreadyAttached){for(var a=this._getInitialListenersList(),b=0;b<a.length;b++)this._addListener(a[b].evt,a[b].cb);this.eventsAlreadyAttached=!0}},_disconnectTouchEvents:function(){for(var a=this._getInitialListenersList(),b=0;b<a.length;b++)this._removeListener(a[b].evt,a[b].cb);this.eventsAlreadyAttached=!1},_getInitialListenersList:function(){return[]},_getAdditionalListenersList:function(){return[]},_getFakeEventsMap:function(){return{}},_gestureStart:function(a,b){return this.__validateNbTouches(a)?(this._disconnectTouchEvents(),this.startData={positions:d.getPositions(a),time:(new Date).getTime()},this.currentData=null,this._connectAdditionalTouchEvents(),this._getFakeEventsMap().start?this._raiseFakeEvent(a,this._getFakeEventsMap().start,b):null!=a.returnValue?a.returnValue:!a.defaultPrevented):null},_gestureMove:function(a,b){return this.__validateNbTouches(a)?(this.currentData={positions:d.getPositions(a),time:(new Date).getTime()},this._getFakeEventsMap().move?this._raiseFakeEvent(a,this._getFakeEventsMap().move,b):null!=a.returnValue?a.returnValue:!a.defaultPrevented):null},_gestureEnd:function(a,b){return this.__validateNbTouches(a)?(this._disconnectAdditionalTouchEvents(),this._connectTouchEvents(),this.currentData={positions:d.getPositions(a),time:(new Date).getTime()},this._getFakeEventsMap().end?this._raiseFakeEvent(a,this._getFakeEventsMap().end,b):null!=a.returnValue?a.returnValue:!a.defaultPrevented):null},_gestureCancel:function(a,b){return this._disconnectAdditionalTouchEvents(),this._connectTouchEvents(),this.currentData={positions:d.getPositions(a),time:(new Date).getTime()},this._getFakeEventsMap().cancel?this._raiseFakeEvent(a,this._getFakeEventsMap().cancel,b):null!=a.returnValue?a.returnValue:!a.defaultPrevented},_connectAdditionalTouchEvents:function(){for(var a=this._getAdditionalListenersList(),b=0;b<a.length;b++)this._addListener(a[b].evt,a[b].cb)},_disconnectAdditionalTouchEvents:function(){for(var a=this._getAdditionalListenersList(),b=0;b<a.length;b++)this._removeListener(a[b].evt,a[b].cb)},_addListener:function(a,b){this.callbackMap[a]=b;var c=void 0!==this.target.addEventListener;if(!c){var d=this;this._attachEventFn=function(a){d.handleEvent(a)}}c?this.target.addEventListener(a,this,!1):this.target.attachEvent("on"+a,this._attachEventFn)},handleEvent:function(a){if(this.callbackMap[a.type]){var b=this.callbackMap[a.type];if(b)return b(a)}},_removeListener:function(a){this.callbackMap[a]=null;var b=void 0!==this.target.removeEventListener;b?this.target.removeEventListener(a,this,!1):this.target.detachEvent("on"+a,this._attachEventFn)},_raiseFakeEvent:function(a,b,c){var e=a.target?a.target:a.srcElement,f=d.getFakeEvent(b,e);a.returnValue||f.preventDefault(),a.cancelBubble&&f.stopPropagation(),f.pageX=a.pageX,f.pageY=a.pageY,f.clientX=a.clientX,f.clientY=a.clientY,f.touches=a.touches,f.changedTouches=a.changedTouches,f.isPrimary=a.isPrimary,this.startData&&this.startData.time&&(f.duration=(new Date).getTime()-this.startData.time),c||(c={}),c.startX=this.startData.positions[0].x,c.startY=this.startData.positions[0].y;var g=d.getPositions(a);return c.currentX=g[0].x,c.currentY=g[0].y,f.detail=c,this.evthandler.handleEvent(f),a.cancelBubble=f.hasStopPropagation,a.returnValue=!f.hasPreventDefault,a.returnValue},_calculateDistance:function(a,b,c,d){return Math.sqrt(Math.pow(c-a,2)+Math.pow(d-b,2))},__validateNbTouches:function(a){var b=d.getFingerIndex(a);return 1==this.NB_TOUCHES&&0===b||2==this.NB_TOUCHES&&b>=0}});b.exports.Gesture=e},{"./touchEvent":"YZQQq0","hsp/klass":"V83taH"}],"hsp/gestures/gesture":[function(a,b){b.exports=a("cx5bBv")},{}],CmOFUj:[function(a,b,c){var d=a("hsp/klass"),e=a("./tap").Tap,f={tap:{name:"Tap",klass:e},tapstart:{name:"Tap",klass:e},tapcancel:{name:"Tap",klass:e}};c.isGesture=function(a){return"undefined"!=typeof f[a]};var g=d({$constructor:function(){this.evtHandlers=[]},startGesture:function(a,b,c){var d=f[a];if("undefined"!=typeof d){for(var e=!1,g=0,h=this.evtHandlers.length;h>g;g++)if(this.evtHandlers[g].name===d.name){e=!0;break}e||this.evtHandlers.push({name:d.name,instance:new d.klass(b,c)})}},$dispose:function(){for(var a=0,b=this.evtHandlers.length;b>a;a++)this.evtHandlers[a].instance.$dispose();this.evtHandlers=null}});b.exports.Gestures=g},{"./tap":"CoqO69","hsp/klass":"V83taH"}],"hsp/gestures/gestures":[function(a,b){b.exports=a("CmOFUj")},{}],"hsp/gestures/tap":[function(a,b){b.exports=a("CoqO69")},{}],CoqO69:[function(a,b){var c=a("hsp/klass"),d=a("./touchEvent"),e=a("./gesture").Gesture,f=c({$extends:e,MARGIN:10,_getInitialListenersList:function(){return[{evt:this.touchEventMap.touchstart,cb:this._tapStart.bind(this)}]},_getAdditionalListenersList:function(){return[{evt:this.touchEventMap.touchmove,cb:this._tapMove.bind(this)},{evt:this.touchEventMap.touchend,cb:this._tapEnd.bind(this)}]},_getFakeEventsMap:function(){return{start:"tapstart",end:"tap",cancel:"tapcancel"}},_tapStart:function(a){var b=this._gestureStart(a);return null==b?null!=a.returnValue?a.returnValue:!a.defaultPrevented:b},_tapMove:function(a){var b=d.getPositions(a);if(this.MARGIN>=this._calculateDistance(this.startData.positions[0].x,this.startData.positions[0].y,b[0].x,b[0].y)){var c=this._gestureMove(a);return null==c?this._gestureCancel(a):c}return this._gestureCancel(a)},_tapEnd:function(a){var b=this._gestureEnd(a);return null==b?this._gestureCancel(a):null!=a.returnValue?a.returnValue:!a.defaultPrevented}});b.exports.Tap=f},{"./gesture":"cx5bBv","./touchEvent":"YZQQq0","hsp/klass":"V83taH"}],YZQQq0:[function(a,b,c){function d(){var a={touchstart:"touchstart",touchend:"touchend",touchmove:"touchmove"},b="ontouchstart"in window||window.DocumentTouch&&window.document instanceof window.DocumentTouch;return b||(a={touchstart:"mousedown",touchend:"mouseup",touchmove:"mousemove"}),window.navigator.msPointerEnabled&&(a={touchstart:"MSPointerDown",touchend:"MSPointerUp",touchmove:"MSPointerMove"}),a}function e(a){return a=a.toLowerCase(),h[a]||a}var f=c.touchEventMap=d();c.getPositions=function(a){var b=[];if(a.touches&&a.touches[0]||a.changedTouches&&a.changedTouches[0]){for(var c=0;c<a.touches.length;c++)b.push({x:a.touches[c].pageX?a.touches[c].pageX:a.touches[c].clientX,y:a.touches[c].pageY?a.touches[c].pageY:a.touches[c].clientY});if(a.type==f.touchend)for(var c=0;c<a.changedTouches.length;c++)b.push({x:a.changedTouches[c].pageX?a.changedTouches[c].pageX:a.changedTouches[c].clientX,y:a.changedTouches[c].pageY?a.changedTouches[c].pageY:a.changedTouches[c].clientY})}else b.push({x:a.pageX?a.pageX:a.clientX,y:a.pageY?a.pageY:a.clientY});return b},c.getFingerIndex=function(a){var b=0;if(window.navigator.msPointerEnabled)b=a.isPrimary?0:1;else if(a.touches||a.changedTouches)if(a.changedTouches.length>1)b=100+a.changedTouches.length;else if(a.type==f.touchend)b=a.touches.length+a.changedTouches.length-1;else for(var c=a.changedTouches[0].pageX?a.changedTouches[0].pageX:a.changedTouches[0].clientX,d=a.changedTouches[0].pageY?a.changedTouches[0].pageY:a.changedTouches[0].clientY,e=0;e<a.touches.length;e++)if(c==(a.touches[e].pageX?a.touches[e].pageX:a.touches[e].clientX)&&d==(a.touches[e].pageY?a.touches[e].pageY:a.touches[e].clientY)){b=e;break}return b};var g={target:"srcElement",type:"type",clientX:"clientX",clientY:"clientY",altKey:"altKey",ctrlKey:"ctrlKey",shiftKey:"shiftKey",pageX:"pageX",pageY:"pageY",relatedTarget:"relatedTarget",button:"button",direction:"direction",distance:"distance",duration:"duration",startX:"startX",startY:"startY",endX:"endX",endY:"endY",detail:"detail",wheelDelta:"wheelDelta",wheelDeltaX:"wheelDeltaX",wheelDeltaY:"wheelDeltaY",screenX:"screenX",screenY:"screenY",touches:"touches",changedTouches:"changedTouches",targetTouches:"targetTouches",isPrimary:"isPrimary"},h={focusin:"focus",focusout:"blur",dommousescroll:"mousewheel",webkitanimationstart:"animationstart",oanimationstart:"animationstart",msanimationstart:"animationstart",webkitanimationiteration:"animationiteration",oanimationiteration:"animationiteration",msanimationiteration:"animationiteration",webkitanimationend:"animationend",oanimationend:"animationend",msanimationend:"animationend",webkittransitionend:"transitionend",otransitionend:"transitionend",mstransitionend:"transitionend"};c.getFakeEvent=function(a,b){var c=window.navigator?window.navigator.userAgent.toLowerCase():"",d=c.indexOf("gecko")>-1,f=!1;if(/msie[\/\s]((?:\d+\.?)+)/.test(c)){var h=RegExp.$1,i=parseInt(h,10);if(i>=7){var j=window.document.documentMode||7;j!=i&&(i=j)}f=8>=i}var k={},l={type:a};if(f&&window.event){l=window.event;for(var m in g)g.hasOwnProperty(m)&&(k[m]=l[g[m]]);"mouseout"==l.type?k.relatedTarget=l.toElement:"mouseover"==l.type&&(k.relatedTarget=l.fromElement)}else for(var m in g)g.hasOwnProperty(m)&&(k[m]=l[m]);if(k.type=e(l.type),k.charCode=0,k.keyCode=0,"keydown"==k.type||"keyup"==k.type)k.keyCode=l.keyCode,k.isSpecialKey=k.isSpecialKey(this.keyCode,l);else if("keypress"==k.type){var n=l.keyCode||l.charCode,o=d&&l.keyCode;k.keyCode=n,o||(k.keyCode=n,n>32&&38>n&&(k.keyCode=n+16),n>41&&48>n&&(k.keyCode=n+64),n>47&&58>n&&(k.keyCode=n+48),n>96&&123>n&&(k.keyCode=n-32)),k.charCode=n,k.isSpecialKey=k.isSpecialKey(this.keyCode,l)}return k.hasStopPropagation=!1,k.hasPreventDefault=!1,k.preventDefault=l.preventDefault?function(a){k.hasPreventDefault=!0,l.preventDefault(),a===!0&&k.stopPropagation()}:function(a){k.hasPreventDefault=!0,l.returnValue=!1,a===!0&&k.stopPropagation()},k.stopPropagation=l.stopPropagation?function(){k.hasStopPropagation=!0,l.stopPropagation()}:function(){k.hasStopPropagation=!0,l.cancelBubble=!0},k._dispose=function(){l=null,k.preventDefault=null,k.stopPropagation=null},k.type=a,k.target=b,k}},{}],"hsp/gestures/touchEvent":[function(a,b){b.exports=a("YZQQq0")},{}],"hsp/json":[function(a,b){b.exports=a("iVLrWG")},{}],iVLrWG:[function(a,b){function c(a,b,c,d,e){return{type:e,object:a,name:b,newValue:c,oldValue:d}}function d(a,b){var c=a[g];if(c)for(var d,e=0,f=c.length;f>e;e++)d=c[e],d.constructor===Function&&d(b)}function e(a,b,c){"object"==typeof a&&(a[c]||(a[c]=[]),a[c].push(b))}function f(a,b,c){if("object"==typeof a){var d=a[c];if(d){for(var e,f=[],g=0,h=d.length;h>g;g++)e=d[g],e!==b&&f.push(e);0===f.length?delete a[c]:a[c]=f}}}var g="+json:observers",h=Array.prototype,i=h.splice,j=h.push,k=h.shift,l=h.pop,m=h.reverse,n=h.sort,o=h.unshift;Array.prototype.splice=function(a){if(this[g]){var b=this.length,e=i.apply(this,arguments),f=this.length,h=[c(this,a,null,null,"splice")];return b!==f&&h.push(c(this,"length",f,b,"updated")),d(this,h),e}return i.apply(this,arguments)},Array.prototype.splice2=function(a,b,e){var f=this.length;e||(e=[]),e.splice(0,0,a,b);var h=i.apply(this,e);if(this[g]){var j=this.length,k=[c(this,a,null,null,"splice")];f!==j&&k.push(c(this,"length",j,f,"updated")),d(this,k)}return h},Array.prototype.push=function(){if(this[g]){var a,b,e=arguments,f=e.length,h=this.length,i=[];if(1>f)return h;if(1==f)b=j.call(this,e[0]),i.push(c(this,h,e[0],null,"new"));else{for(var k=0;f>k;k++)a=e[k],i[f-k-1]={type:"new",object:this,name:h+k,newValue:a};b=j.apply(this,e)}return h!==b&&i.push(c(this,"length",b,h,"updated")),d(this,i),b}return j.apply(this,arguments)},Array.prototype.shift=function(){if(this[g]){var a=this.length,b=k.call(this),e=this.length,f=[c(this,0,null,null,"shift")];return a!==e&&f.push(c(this,"length",e,a,"updated")),d(this,f),b}return k.call(this)},Array.prototype.unshift=function(){if(this[g]){var a=this.length;o.apply(this,arguments);var b=this.length,e=[c(this,0,null,null,"unshift")];return a!==b&&e.push(c(this,"length",b,a,"updated")),d(this,e),b}return o.apply(this,arguments)},Array.prototype.pop=function(){if(this[g]){var a=this.length,b=l.call(this),e=this.length,f=[c(this,0,null,null,"pop")];return a!==e&&f.push(c(this,"length",e,a,"updated")),d(this,f),b}return l.call(this)},Array.prototype.reverse=function(){var a=m.call(this);return d(this,[c(this,0,null,null,"reverse")]),a},Array.prototype.sort=function(a){var b=n.call(this,a);return d(this,[c(this,0,null,null,"sort")]),b},b.exports={MD_OBSERVERS:g,set:function(a,b,e){if("object"!=typeof a)return console.log("[json.set] Invalid object used to set a value"),void 0;if(a[g]){var f=a.hasOwnProperty(b),h=a[b],i=a.length,j=null;if(a[b]=e,f?h!==e&&(j=[c(a,b,e,h,"updated")]):j=[c(a,b,e,h,"new")],a.constructor===Array){var k=a.length;i!==k&&(j||(j=[]),j.push(c(a,"length",k,i,"updated")))}return j&&d(a,j),e}a[b]=e},observe:function(a,b){e(a,b,g)},unobserve:function(a,b){f(a,b,g)}}},{}],V83taH:[function(a,b){function c(){}function d(a){return Object.create?Object.create(a):(c.prototype=a,new c)}function e(){return g++,"+"+g+":"}var f=function(a){var b=a.$constructor;if(!b){var c=a.$extends;b=c?function(){c.apply(this,arguments)}:new Function,a.$constructor=b}if(a.$extends){if(!a.$extends.prototype)throw new Error("[klass] $extends attribute must be a function");var e=d(a.$extends.prototype);for(var f in a)a.hasOwnProperty(f)&&(e[f]=b[f]=a[f]);b.prototype=e}else{b.prototype=a;for(var f in a)a.hasOwnProperty(f)&&(b[f]=a[f])}return b};f.createObject=d;var g=0;f.createMetaDataPrefix=e,b.exports=f},{}],"hsp/klass":[function(a,b){b.exports=a("V83taH")},{}],"hsp/propobserver":[function(a,b){b.exports=a("PtdIb9")},{}],PtdIb9:[function(a,b){function c(a){for(var b,c=0,e=a.length;e>c;c++)b=a[c],b&&this.props[b.name]&&d(this,b,b.name);this.props[g]&&d(this,b,g)}function d(a,b,c){for(var d=a.props[c],e=0,f=d.length;f>e;e++)d[e].onPropChange(b)}var e=a("hsp/klass"),f=a("hsp/json"),g="**ALL**",h=e({$constructor:function(a){this.id=0,this.target=a,this.props={};var b=this;this.callback=function(a){c.call(b,a)},f.observe(a,this.callback)},$dispose:function(){f.unobserve(this.target,this.callback),delete this.props,delete this.callback,delete this.target},addObserver:function(a,b){b||(b=g);var c=this.props[b];c||(c=[],this.props[b]=c),c.push(a)},rmObserver:function(a,b){b||(b=g);var c=this.props[b];if(c){for(var d=0,e=c.length;e>d;d++)c[d]===a&&(c.splice(d,1),e-=1,d-=1);0===c.length&&delete this.props[b]}}});b.exports=h},{"hsp/json":"iVLrWG","hsp/klass":"V83taH"}],"hsp/rt":[function(a,b){b.exports=a("6dLxui")},{}],"6dLxui":[function(a,b){function c(a,b){p[a]=function(a,c,d,e,f,g){return new b(a,c,d,e,f,g)}}a("hsp/es5");var d=a("hsp/klass"),e=a("hsp/rt/$root"),f=e.$RootNode,g=e.$InsertNode,h=e.$CptNode,i=a("hsp/rt/cptwrapper"),j=d({$constructor:function(a){this.nodedefs=a},process:function(a,b,c,d){var e,i={},j=[];if(b)for(var k=0,l=b.length;l>k;k+=2)e=b[k],i[e]=b[k+1],j.push(e);i["#scope"]=i;var m=null;return!a.$constructor||a.$constructor!==g&&a.$constructor!==h?m=new f(i,this.nodedefs,j,c,d):(m=a,m.init(i,this.nodedefs,j,c,d)),m}}),k=[],l=null,m=b.exports.refresh=function(){var a;for(l&&(clearTimeout(l),l=null);a=k.shift();)a.refresh()},n=function(){l=null,m()};m.addTemplate=function(a){var b=k.indexOf(a);0>b&&(k.push(a),l||(l=setTimeout(n,0)))},b.exports.display=function(a,b,c){if(b&&a){if(void 0===a.render||a.render.constructor!==Function)throw new Error("[hsp.display] Invalid argument: tplResult is not a valid template result");a.render(b,c)}},b.exports.template=function(a,b){var c=new j(null),d=[],f=0,g=!1,h=null;if(a.constructor===Array){f=a.length;for(var k=0;f>k;k++)d.push(a[k]),d.push(null)}else{g=!0,h=e.getObject(a.ctl);var l=null;if(null===h?l="Undefined component controller: "+a.ctl.slice(1).join("."):h.constructor!==Function&&(l="Component controller must be a function: "+a.ctl.slice(1).join(".")),l)throw console.error(l),l;d[0]=a.ref}var m=function(){var a=null,e=null;if(!c.nodedefs)try{c.nodedefs=b(p)}catch(j){throw j.constructor===ReferenceError?"Invalid reference: "+(j.message||j.description):j}if(g)a=new i.CptWrapper(h),this.isCptComponent&&(a.nodeInstance=this,a.cpt.nodeInstance=this),d[1]=a.cpt;else for(var k=0;f>k;k++)d[1+2*k]=arguments[k];return arguments.length>0&&(e=arguments[0]),c.process(this,d,a,e)};return m.isTemplate=!0,m.controllerConstructor=h,m};var o=null;b.exports.useLogger=function(a){o||(o=[]),o.push(a)},b.exports.logErrors=function(a,b){var c=!0;if(o&&o.length)for(var d,e=o.length,f=0;e>f;f++)if(d=o[f](a,b),d===!1){c=!1;break}if(c)for(var g,h,i,j=b.length,f=0;j>f;f++)g=b[f],g.lineInfoTxt?i="\r\n>> "+g.lineInfoTxt.replace(/\r?\n/gi,"\r\n>> "):g.code&&(i="\r\n>> "+g.code),h=["Error in [",a,"]\r\n>> ",g.description,"(line: ",g.line,",column: ",g.column,")",i].join(""),console.error(h)};for(var p={},q=["$text",a("hsp/rt/$text"),"$if",a("hsp/rt/$if"),"$insert",g,"$foreach",a("hsp/rt/$foreach"),"elt",a("hsp/rt/eltnode"),"cpt",h],r=0,s=q.length;s>r;r+=2)c(q[r],q[r+1])},{"hsp/es5":"NxB7Fd","hsp/klass":"V83taH","hsp/rt/$foreach":"OC/ttL","hsp/rt/$if":"tHafC4","hsp/rt/$root":"DVCrOy","hsp/rt/$text":"CPlRjs","hsp/rt/cptwrapper":"9tva8b","hsp/rt/eltnode":"8WsFNq"}],"OC/ttL":[function(a,b){var c=a("hsp/klass"),d=a("hsp/document"),e=a("hsp/json"),f=a("hsp/rt/tnode").TNode,g=c({$extends:f,$constructor:function(a,b,c,d,e,g){this.isDOMless=!0,this.itemName=c,this.itemKeyName=b,this.forType=0,this.colExpIdx=e,a["e"+e][0]=1,f.$constructor.call(this,a),this.displayedCol=null,this.itemNode=new h(g,c,b)},$dispose:function(){f.$dispose.call(this),this.root&&this.displayedCol&&this.root.rmObjectObserver(this,this.displayedCol),this.displayedCol=null},createNodeInstance:function(a){var b=f.createNodeInstance.call(this,a);b.TYPE="# foreach";var c=b.node;b.node1=d.createComment("# foreach"),b.node2=d.createComment("# /foreach"),c.appendChild(b.node1);var e=b.eh.getValue(b.colExpIdx,b.vscope,null);return b.createChildNodeInstances(e,c),c.appendChild(b.node2),b},createChildNodeInstances:function(a,b){var c,d=this.forType,e=this.itemNode;if(a)if(this.root.createObjectObserver(this,a),this.displayedCol=a,this.childNodes=c=[],0===d&&a.constructor!==Array&&(d=1),0===d)for(var f=a.length,g=0,h=0;f>g;g++)null!=a[g]&&void 0!==a[g]&&(c.push(e.createNodeInstance(this,a[g],h,0===h,h===f-1,b)),h++);else console.log("[# foreach] for type on and of are not supported yet")},refresh:function(){if(this.adirty){var a=this.eh.getValue(this.colExpIdx,this.vscope,null);if(a!==this.displayedCol||null===this.childNodes||0===this.childNodes.length){this.root.rmObjectObserver(this,this.displayedCol),this.deleteAllItems();var b=d.createDocumentFragment();this.createChildNodeInstances(a,b),this.node.insertBefore(b,this.node2);for(var c=0,e=this.childNodes.length;e>c;c++)this.childNodes[c].replaceNodeBy(b,this.node)}else this.updateCollection(a);this.adirty=!1}f.refresh.call(this)},updateCollection:function(a){for(var b=[],c=this.itemName,e=this.childNodes.length,f=a.length,g=0;e>g;g++)b[g]=this.childNodes[g].vscope[c];for(var h,i,j,k=[],l=0,m=Math.max(e,f),g=0;e>g;g++)if(h=b[g],f>g)if(i=a[g],null!=i&&void 0!==i){if(h!==i)if(k[g]){this.childNodes.splice(g,0,k[g]),b.splice(g,0,k[g].vscope[c]),e+=1;var n=this.node2;e-1>g&&(n=this.childNodes[g+1].node1),k[g].attachDOMNodesBefore(n),k[g]=null}else if(j=a.indexOf(h,g),j>g?(k[j]=this.childNodes[g],this.childNodes[g].detachDOMNodes(l),this.childNodes.splice(g,1)):l=this.deleteItem(g,l,!1),b.splice(g,1),e-=1,j=b.indexOf(i,g),j>=g){if(j!=g){this.moveItem(j,g,l,!1);var o=b.splice(j,1);b.splice(g,0,o)}}else{var p=this.createItem(i,g,0===g,g===m-1,d.createDocumentFragment()),q=this.node2;this.childNodes[g+1]&&(q=this.childNodes[g+1].node1),this.node.insertBefore(p.node,q),p.replaceNodeBy(p.node,this.node),b.splice(g,0,i),e+=1}}else a.splice(g,1),k.splice(g,1),f-=1,m=Math.max(e,f),g-=1;else i=null,l=this.deleteItem(g,l,!1),b.splice(g,1),g-=1,e-=1;if(this.resyncItemScopes(0,f-1),f>e)for(var g=e;f>g;g++)if(i=a[g],null!=i&&void 0!==i)if(k[g])this.childNodes.splice(g,0,k[g]),k[g].attachDOMNodesBefore(this.node2),k[g].updateScope(g,0===g,g===m-1),k[g]=null;else{var p=this.createItem(i,g,0===g,g===m-1,d.createDocumentFragment());this.node.insertBefore(p.node,this.node2),p.replaceNodeBy(p.node,this.node)}else a.splice(g,1),k.splice(g,1),f-=1;k=null},deleteItem:function(a,b,c){var d=this.childNodes[a],e=0;return d&&(this.childNodes.splice(a,1),e=d.detachDOMNodes(b),d.$dispose(),c!==!1&&this.resyncItemScopes(a)),e},deleteAllItems:function(){if(this.node.childNodes)for(var a=this.node,b=!1,c=a.childNodes,d=c.length,e=this.node1,f=this.node2,g=0;d>g;g++){var h=c[g];if(h!==e){if(b){if(h===f)break;a.removeChild(h),g-=1,d-=1}}else b=!0}if(this.childNodes){for(var c=this.childNodes,g=0,d=c.length;d>g;g++)c[g].$dispose();this.childNodes=null}},moveItem:function(a,b,c,d){var e,f=this.childNodes,g=f.length;if(!(a===b||a>g-1||b>g-1)){var h=this.node2;g-1>b&&(h=f[b].node1),e=f[a],f.splice(a,1),e.detachDOMNodes(c),f.splice(b,0,e),e.attachDOMNodesBefore(h),d!==!1&&this.resyncItemScopes(Math.min(a,b))}},createItem:function(a,b,c,d,e){var f=this.itemNode.createNodeInstance(this,a,b,c,d,e);return this.childNodes.splice(b,0,f),f},resyncItemScopes:function(a,b){var c=this.childNodes.length;a||(a=0),void 0===b&&(b=c-1);for(var d=a;c>d;d++)this.childNodes[d].updateScope(d,0===d,d===b)}}),h=c({$extends:f,$constructor:function(a,b,c){f.$constructor.call(this,0),this.isDOMless=!0,this.itemName=b,this.itemKeyName=c,a&&0!==a&&(this.children=a),this.detachedNodes=null},$dispose:function(){f.$dispose.call(this),this.node1=null,this.node2=null,this.detachedNodes=null},createNodeInstance:function(a,b,e,g,h,i){var j=c.createObject(a.vscope),k=this.itemName;j["#scope"]=j,j[k]=b,j[this.itemKeyName]=e,j[k+"_isfirst"]=g,j[k+"_islast"]=h;var l=f.createNodeInstance.call(this,a);l.TYPE="# item";var m=l.node;if(l.vscope=j,l.node1=d.createComment("# item"),l.node2=d.createComment("# /item"),i&&(l.node=m=i),m.appendChild(l.node1),this.children){l.childNodes=[];for(var n=0,o=this.children.length;o>n;n++)l.childNodes[n]=this.children[n].createNodeInstance(l)}return m.appendChild(l.node2),l},detachDOMNodes:function(a){a||(a=0);var b=a;if(!this.node.childNodes)return b;var b,c,d=this.node,e=!1,f=d.childNodes.length,g=this.node1,h=this.node2;if(!this.detachedNodes){this.detachedNodes=[];for(var i=a;f>i;i++)if(c=d.childNodes[i],c===g&&(e=!0),e&&(this.detachedNodes.push(c),d.removeChild(c),i-=1,c===h)){b=i;break}return b}},attachDOMNodesBefore:function(a){if(this.detachedNodes){var b=this.detachedNodes,c=b.length;if(!a||!this.detachedNodes)return;for(var e=d.createDocumentFragment(),f=0;c>f;f++)e.appendChild(b[f]);a.parentNode.insertBefore(e,a)}this.detachedNodes=null},updateScope:function(a,b,c){var d=this.vscope,f=this.itemName;e.set(d,this.itemKeyName,a),e.set(d,f+"_isfirst",b),e.set(d,f+"_islast",c)}});b.exports=g},{"hsp/document":"tRcUKa","hsp/json":"iVLrWG","hsp/klass":"V83taH","hsp/rt/tnode":"uKJF1q"}],"hsp/rt/$foreach":[function(a,b){b.exports=a("OC/ttL")},{}],"hsp/rt/$if":[function(a,b){b.exports=a("tHafC4")},{}],tHafC4:[function(a,b){var c=a("hsp/klass"),d=a("hsp/document"),e=a("hsp/rt/tnode").TNode,f=c({$extends:e,$constructor:function(a,b,c,d){e.$constructor.call(this,a),this.isDOMless=!0,this.lastConditionValue=!1,this.isDOMempty=!0,this.condexpidx=b,c&&0!==c&&(this.children=c),d&&0!==d&&(this.children2=d)},createNodeInstance:function(a){var b=e.createNodeInstance.call(this,a),c=b.node;return b.TYPE="# if",b.node1=d.createComment("# if"),b.node2=d.createComment("# /if"),c.appendChild(b.node1),c.appendChild(b.node2),b.createChildNodeInstances(b.getConditionValue()),b},createChildNodeInstances:function(a){if(this.lastConditionValue=a,!this.isDOMempty){var b=this.childNodes;if(b){for(var c=0,e=b.length;e>c;c++)b[c].$dispose();delete this.childNodes}this.childNodes=null;for(var f,g=this.node,h=!1,i=this.node1,j=this.node2,c=g.childNodes.length-1;c>-1;c--)if(f=g.childNodes[c],h){if(f===i){c=-1;break}g.removeChild(f)}else f===j&&(h=!0);this.isDOMempty=!0}var f=a?this.children:this.children2;if(f){var k,e=f.length;if(e>0){this.childNodes=[];var l=d.createDocumentFragment();this.node=l;for(var c=0;e>c;c++)k=f[c].createNodeInstance(this),this.childNodes.push(k);this.replaceNodeBy(this.node,this.parent.node),this.node.insertBefore(l,this.node2),this.isDOMempty=!1}}},getConditionValue:function(){var a=!1;return this.eh&&(a=this.eh.getValue(this.condexpidx,this.vscope,!1)),a?!0:!1},refresh:function(){var a=this.getConditionValue();a!==this.lastConditionValue?(this.createChildNodeInstances(a),this.cdirty=!1):e.refresh.call(this)}});b.exports=f},{"hsp/document":"tRcUKa","hsp/klass":"V83taH","hsp/rt/tnode":"uKJF1q"}],"hsp/rt/$root":[function(a,b){b.exports=a("DVCrOy")},{}],DVCrOy:[function(a,b,c){var d=a("hsp/klass"),e=a("hsp/document"),f=a("hsp/json"),g=a("hsp/propobserver"),h=a("hsp/rt/tnode"),i=h.TNode,j={$CptAttInsert:a("hsp/rt/cptattinsert").$CptAttInsert,$CptAttribute:a("hsp/rt/cptattribute").$CptAttribute,$CptComponent:a("hsp/rt/cptcomponent").$CptComponent,$CptTemplate:a("hsp/rt/cpttemplate").$CptTemplate},k=11,l=d({$extends:i,$constructor:function(a,b,c,f,g){if(this.isInsertNode)i.$constructor.call(this,this.exps);else{i.$constructor.call(this,0);var h=e.createDocumentFragment();this.node=h,this.root=this}this.MD_ID=d.createMetaDataPrefix()+"oid",this.propObs=[],this.argNames=null,(a||b||c||f)&&this.init(a,b,c,f,g)},init:function(a,b,c,d,e){if(this.vscope=a,d)this.ctlWrapper=d,this.controller=d.cpt,this.ctlWrapper.init(e);else if(this.$constructor===o&&e)for(var f in e)a[f]=e[f];var g=[];if(b.constructor===Array)for(var h=0,i=b.length;i>h;h++)g.push(b[h].createNodeInstance(this));else g[0]=b.createNodeInstance(this);this.childNodes=g,this.argNames=c},$dispose:function(){for(var a,b=0,c=this.propObs.length;c>b;b++)a=this.propObs[b],delete a.target[this.MD_ID],a.$dispose();delete this.propObs,this.ctlWrapper&&(this.ctlWrapper.$dispose(),this.ctlWrapper=null,this.controller=null),i.$dispose.call(this)},createExpressionObservers:function(a){var b,c,d=a.vscope,e=a.eh;if(e)for(var f in e.exps)if(b=e.exps[f].getObservablePairs(e,d))if(c=b.length,1===c)this.createObjectObserver(a,b[0][0],b[0][1]);else for(var g=0;c>g;g++)this.createObjectObserver(a,b[g][0],b[g][1])},createObjectObserver:function(a,b,c){var d,e=b[this.MD_ID];if(e)d=this.propObs[e-1];else{d=new g(b);var f=this.propObs.length;this.propObs[f]=d,d.id=e=f+1,b[this.MD_ID]=e}d.addObserver(a,c)},rmObjectObserver:function(a,b,c){var d=b[this.MD_ID];if(d){var e=this.propObs[d-1];e.rmObserver(a,c)}},updateArgument:function(a,b){f.set(this.vscope["#scope"],this.argNames[a],b)},render:function(a,b){var c=a;if("string"==typeof c){if(c=e.getElementById(c),null===c)return console.error("[hashspace] Template cannot be rendered - Invalid element id: "+a),this}else if(!c||!c.appendChild)return console.error("[hashspace] Template cannot be rendered - Invalid element: "+a),this;var d=this.node;return d.nodeType!==k?console.log("[hashspace] root element can only be appended once in the DOM"):(b!==!1&&(c.innerHTML=""),c.appendChild(d),this.replaceNodeBy(d,c)),this}}),m=c.getObject=function(a,b){var c=a[0],d=null,e=a.length;if(void 0===c||null===c){if(b&&e>1&&(d=b[a[1]]),void 0===d||null===d)return null}else d=c;if(e>2)for(var f=2;e>f;f++)d=d[a[f]];return d},n=d({$extends:l,$constructor:function(a,b){this.isInsertNode=!0,this.isDOMless=!0,this.exps=a,l.$constructor.call(this),this.expIdx=b},$dispose:function(){l.$dispose.call(this),delete this.exps},createNodeInstance:function(a){var b=i.createNodeInstance.call(this,a),c=b.eh.getExpr(b.expIdx);return c&&c.getFuncRef?(c=c.getFuncRef(b.vscope,null),b.func=c.fn,b.tplArgs=c.args,b.isTemplate=b.func.isTemplate===!0,b.isTemplate?b.func.apply(b,b.getArguments()):(b.isDOMless=!1,b.node=e.createTextNode(b.getContent()),b.parent.node.appendChild(b.node))):console.log("[$InsertNode] Invalid template function"),b},getArguments:function(){for(var a=this.tplArgs,b=[],c=this.eh,d=0,e=a.length;e>d;d+=2)a[d]?b.push(c.getValue(a[d+1],this.vscope,null)):b.push(a[d+1]);return b},getContent:function(){return this.isTemplate?"":this.func.apply({},this.getArguments())},refresh:function(){if(this.adirty){if(this.isTemplate)for(var a=this.parent.vscope,b=this.tplArgs,c=this.eh,d=0,e=0,f=b.length;f>d;d+=2,e++)b[d]&&this.updateArgument(e,c.getValue(b[d+1],a,null));else this.node.nodeValue=this.getContent();this.adirty=!1}i.refresh.call(this)}}),o=d({$extends:l,$constructor:function(a,b,c,d,e){this.tplPath=a,this.isInsertNode=!0,this.isDOMless=!0,this.exps=b,this.attcfg=c,l.$constructor.call(this),this.createAttList(c,d),this.controller=null,this.ctlAttributes=null,this._scopeChgeCb=null,this.tplAttribute=null,e&&0!==e&&(this.children=e)},$dispose:function(){this.cleanObjectProperties()},cleanObjectProperties:function(){this._scopeChgeCb&&(f.unobserve(this.vscope,this._scopeChgeCb),this._scopeChgeCb=null),l.$dispose.call(this),this.exps=null,this.controller=null,this.ctlAttributes=null},createNodeInstance:function(a){var b=null,c=a.vscope,d=this.tplPath;if(3===d.length){var e=d[1],f=c[e];if(f&&f.attributes){var g=f.attributes[d[2]];g&&"template"===g.type&&(b=this.createCptIntance("$CptAttInsert",a),b.initCpt(d[1],d[2]))}}else if(2===d.length&&a.getTplAttribute){var h=a.getTplAttribute(d[1]);h&&(b=this.createCptIntance("$CptAttribute",a),b.initCpt(d[1]))}if(!b){var i=m(d,c);i&&"function"==typeof i&&(b=i.controllerConstructor?this.createCptIntance("$CptComponent",a):this.createCptIntance("$CptTemplate",a),b.initCpt(i))}return b||console.error("Invalid component reference: "+d.slice(1).join(".")),b},createCptIntance:function(a,b){this.cptTypes||(this.cptTypes={});var c=this.cptTypes[a];if(!c){var e=j[a],f=d.createObject(this);
for(var g in e)e.hasOwnProperty(g)&&(f[g]=e[g]);c=f,this.cptTypes[a]=c}var h=d.createObject(c);return h.vscope=b.vscope,h.parent=b,h.nodeNS=b.nodeNS,h.root=b.root,h.root.createExpressionObservers(h),h.node=h.parent.node,h},onAttributeChange:function(a){var b=-1,c=this.attcfg[a.name];if(c&&c.constructor===Array&&2===c.length&&""===c[0]&&(b=c[1]),b>-1){var d=this.eh.getExpr(b);d.bound&&d.setValue&&d.setValue(this.parent.vscope,a.newValue)}},refresh:function(){this.adirty&&(this.refreshAttributes&&this.refreshAttributes(),this.adirty=!1),i.refresh.call(this)}});b.exports.$RootNode=l,b.exports.$InsertNode=n,b.exports.$CptNode=o},{"hsp/document":"tRcUKa","hsp/json":"iVLrWG","hsp/klass":"V83taH","hsp/propobserver":"PtdIb9","hsp/rt/cptattinsert":"2SVl5i","hsp/rt/cptattribute":"WABHJ+","hsp/rt/cptcomponent":"xw2Mom","hsp/rt/cpttemplate":"h4hD7E","hsp/rt/tnode":"uKJF1q"}],"hsp/rt/$text":[function(a,b){b.exports=a("CPlRjs")},{}],CPlRjs:[function(a,b){var c=a("hsp/klass"),d=a("hsp/document"),e=a("hsp/rt/tnode").TNode,f=a("hsp/rt/tnode").TExpAtt,g=c({$extends:e,$constructor:function(a,b){e.$constructor.call(this,a),this.textcfg=b,this.isStatic&&(b||(this.textcfg=[""]))},createNode:function(){this.node=d.createTextNode(this.getContent())},getContent:function(){var a=this.textcfg;return this.isStatic?a[0]:f.getValue.call(this,this.eh,this.vscope,"")},refresh:function(){this.adirty&&(this.node.nodeValue=this.getContent(),this.adirty=!1)}});b.exports=g},{"hsp/document":"tRcUKa","hsp/klass":"V83taH","hsp/rt/tnode":"uKJF1q"}],"hsp/rt/cptattinsert":[function(a,b){b.exports=a("2SVl5i")},{}],"2SVl5i":[function(a,b){var c=11;b.exports.$CptAttInsert={initCpt:function(a,b){var d=this.vscope[a],e=d.nodeInstance;if(e.tplAttributes){var f=e.tplAttributes[b];f&&(this.node.appendChild(f.node),f.node.nodeType===c&&(f.node=this.node),f.parent=this,this.childNodes=[],this.childNodes[0]=f)}},$dispose:function(){this.cleanObjectProperties()}}},{}],"WABHJ+":[function(a,b){var c=a("hsp/document");b.exports.$CptAttribute={initCpt:function(a){if(this.tplAttribute={name:a},this.node=c.createDocumentFragment(),this.children){this.childNodes=[];for(var b=0,d=this.children.length;d>b;b++)this.childNodes[b]=this.children[b].createNodeInstance(this)}},$dispose:function(){this.cleanObjectProperties()}}},{"hsp/document":"tRcUKa"}],"hsp/rt/cptattribute":[function(a,b){b.exports=a("WABHJ+")},{}],xw2Mom:[function(a,b){var c=a("hsp/json"),d=a("hsp/rt/$text"),e=a("hsp/rt/tnode").TNode,f=a("hsp/document");b.exports.$CptComponent={initCpt:function(a){this.isCptComponent=!0;var b={};if(this.atts)for(var d,e=this.parent.vscope,f=0,g=this.atts.length;g>f;f++)d=this.atts[f],b[d.name]=d.getValue(this.eh,e,null);var h=a.controllerConstructor;if(this.ctlAttributes=h.prototype.attributes,this.loadCptAttributes(),a.call(this,b),this.ctlWrapper&&(this.ctlWrapper.nodeInstance=this),this.controller&&this.tplAttributes){var i=this.controller,j=this.tplAttributes;for(var k in j)j.hasOwnProperty(k)&&c.set(i,k,{node:j[k]})}},$dispose:function(){this.ctlAttributes=null,this.cleanObjectProperties();var a=this.tplAttributes;if(a)for(var b in a)a.hasOwnProperty(b)&&a[b].$dispose();var c=this._attGenerators;if(c)for(var b in c)c.hasOwnProperty(b)&&c[b].$dispose()},loadCptAttributes:function(){var a={},b=this.ctlAttributes,c=null,g=null,h=0;for(var i in b)b.hasOwnProperty(i)&&"template"===b[i].type&&(a[i]=!0,h++,b[i].defaultContent&&(c=i),g=i);if(c||1!==h||(c=g),this.children){var j,k=!1,l=[],m=this.node;this.node=null;for(var n=0,o=this.children.length;o>n;n++){if(j=this.children[n].createNodeInstance(this),j.tplAttribute){k=!0;var p=j.tplAttribute.name;this.tplAttributes||(this.tplAttributes={}),this.tplAttributes[p]=j}l.push(j)}if(this.node=m,!k)if(c){var q=new e(0);q.isDOMless=!0;var r=q.createNodeInstance(this);r.node=f.createDocumentFragment(),r.isDOMless=!1,q.childNodes=l;for(var i in l)l.hasOwnProperty(i)&&(l[i].parent=r,r.node.appendChild(l[i].node));this.tplAttributes={},this.tplAttributes[c]=r}else console.error("Component content cannot be associated to any component attribute")}var s,p,t=this.atts;if(t)for(var i in t)if(t.hasOwnProperty(i)&&(s=t[i],p=s.name,a[p]))if(this.tplAttributes&&this.tplAttributes[p])console.error("Component attribute '"+p+"' is defined multiple times - please check");else{if(!s.generator){var u;u=s.value?new d(0,[""+s.value]):new d(this.exps,t[i].textcfg),this._attGenerators||(this._attGenerators=[]),this._attGenerators.push(u),s.generator=u}var j=s.generator.createNodeInstance(this);this.tplAttributes||(this.tplAttributes={}),this.tplAttributes[p]=j}},getTplAttribute:function(a){var b=this.ctlAttributes;return b?b[a]:null},onEvent:function(a){var b=this.evtHandlers,c=a.type;if(b)for(var d=0,e=b.length;e>d;d++)if(b[d].evtType===c){b[d].executeCb(a,this.eh,this.parent.vscope);break}},refreshAttributes:function(){var a,b,d=this.atts,e=this.eh,f=this.parent.vscope,g=this.controller;if(this.adirty=!1,d&&g&&g.attributes)for(var h=0,i=this.atts.length;i>h;h++)a=d[h],0!==g.attributes[a.name]._binding&&(b=a.getValue(e,f,null),""+b!=""+g[a.name]&&c.set(g,a.name,b))}}},{"hsp/document":"tRcUKa","hsp/json":"iVLrWG","hsp/rt/$text":"CPlRjs","hsp/rt/tnode":"uKJF1q"}],"hsp/rt/cptcomponent":[function(a,b){b.exports=a("xw2Mom")},{}],"hsp/rt/cpttemplate":[function(a,b){b.exports=a("h4hD7E")},{}],h4hD7E:[function(a,b){var c=a("hsp/json");b.exports.$CptTemplate={initCpt:function(a){var b={};if(this.atts)for(var d,e=this.parent.vscope,f=0,g=this.atts.length;g>f;f++)d=this.atts[f],b[d.name]=d.getValue(this.eh,e,null);a.call(this,b),this._scopeChgeCb=this.onScopeChange.bind(this),c.observe(this.vscope,this._scopeChgeCb)},$dispose:function(){this.cleanObjectProperties()},onScopeChange:function(a){a.constructor===Array&&a.length>0&&this.onAttributeChange(a[0])},refreshAttributes:function(){var a,b=this.atts,d=this.eh,e=this.parent.vscope;if(this.adirty=!1,b)for(var f=this.vscope,g=0,h=this.atts.length;h>g;g++)a=b[g],c.set(f,a.name,a.getValue(d,e,null))}}},{"hsp/json":"iVLrWG"}],"9tva8b":[function(a,b){function c(a){return a}function d(a){var b=a.defaultValue,c=a.type;return void 0===b||"template"===c?g[c].defaultValue:g[c].convert(b,{type:"string"})}var e=a("hsp/json"),f=a("hsp/klass"),g={"int":{defaultValue:0,convert:function(a,b){var c=parseInt(a,10);return isNaN(c)?d(b):c}},"float":{defaultValue:0,convert:function(a,b){var c=parseFloat(a);return isNaN(c)?d(b):c}},"boolean":{defaultValue:!0,convert:function(a){return a===!0||1===a||"1"===a||"true"===a}},string:{defaultValue:"",convert:function(a){return a+""}},object:{defaultValue:null,convert:c},callback:{defaultValue:null,convert:c},template:{defaultValue:null,convert:c}},h={none:0,"1-way":1,"2-way":2},i=f({$constructor:function(a){if(a&&a.constructor===Function){this.cpt=new a,this.nodeInstance=null,this.initialized=!1;var b,c,d=this.cpt.attributes;if(d)for(var e in d)b=d[e],e.match(/^on/)?b.type?"callback"!==b.type&&(console.error("Attribute type 'callback' should be set to '"+e+"' instead of: "+b.type),b.type="callback"):console.error("Attribute type 'callback' should be set to '"+e+"'"):(c=b.binding,c?(c=h[c],void 0!==c?b._binding=c:(console.error("Invalid attribute binding value: "+b.binding),b._binding=0)):b._binding=0,b.type?"callback"===b.type?console.error("Attribute of type 'callback' must start with 'on' - please rename: "+e):void 0===g[b.type]&&(console.error("Invalid attribute type: "+b.type),b.type="string"):b.type="string")}else console.error("[CptWrapper] Invalid Component constructor!")},$dispose:function(){this._cptChgeCb&&(e.unobserve(this.cpt,this._cptChgeCb),this._cptChgeCb=null);var a=this.cpt;a&&a.$dispose&&(a.$dispose(),this.cpt=null),this.nodeInstance=null},init:function(a){if(!this.initialized){this.initialized=!0;var b=this.cpt,c=b.attributes;if(b){if(c){a||(a={});var d,f,h,i,j,k;for(var l in c)f=c[l],d=a[l],h="object"==typeof c[l],i=h&&c[l].type,i&&(k=g[f.type],k||(console.error("Invalid component attribute type: "+f.type),k=g.string)),"callback"!==f.type?("template"===f.type?j=null:(j="",void 0!==d?j=d:h?(j=f.defaultValue,void 0===j&&i&&(j=k.defaultValue)):j=f,i&&(j=k.convert(j,f))),b[l]=j):this.createEventFunction(l.slice(2))}b.$init&&b.$init(),this._cptChgeCb=this.onCptChange.bind(this),e.observe(b,this._cptChgeCb)}}},createEventFunction:function(a){var b=this;this.cpt["on"+a]=function(c){c||(c={}),c.type||(c.type=a),b.nodeInstance&&b.nodeInstance.onEvent&&b.nodeInstance.onEvent(c)}},onCptChange:function(a){var b=a,c=this.cpt;if(a.constructor===Array){if(!(a.length>0))return console.error("[CptNode] Invalid change - nbr of changes: "+a.length),void 0;b=a[0]}var d=b.name;if(""!==d){var e=!0;if(c.attributes){var f=c.attributes[d],h=void 0!==f;if(h){var i=f.type;if(i){var j=g[i].convert(b.newValue,f);b.newValue=j,c[d]=j}}h&&this.nodeInstance&&2===f._binding&&(b.newValue=this.cpt[d],this.nodeInstance.onAttributeChange(b)),h&&0===f._binding&&(e=!1)}if(e){if(this.processingChange===!0)return;this.processingChange=!0;try{var k=["on",d.charAt(0).toUpperCase(),d.slice(1),"Change"].join("");c[k]&&c[k].call(c,b.newValue,b.oldValue)}finally{this.processingChange=!1}}}}});b.exports.CptWrapper=i},{"hsp/json":"iVLrWG","hsp/klass":"V83taH"}],"hsp/rt/cptwrapper":[function(a,b){b.exports=a("9tva8b")},{}],"hsp/rt/eltnode":[function(a,b){b.exports=a("8WsFNq")},{}],"8WsFNq":[function(a,b){var c=a("hsp/klass"),d=a("hsp/document"),e=a("hsp/rt/tnode").TNode,f=a("hsp/rt"),g=a("hsp/gestures/gestures"),h=c({$extends:e,$constructor:function(a,b,c,d,f){e.$constructor.call(this,b),this.tag=a,this.isInput="input"===this.tag,this.createAttList(c,d),f&&0!==f&&(this.children=f),this.gesturesEventHandlers=null},$dispose:function(){var a=this.evtHandlers,b=this.node;if(this.isInput&&(this.inputModelExpIdx=null),a)for(var c=void 0!==b.removeEventListener,d=0,f=a.length;f>d;d++)c?b.removeEventListener(a[d].evtType,this,!1):b.detachEvent("on"+a[d].evtType,this._attachEventFn);this.gesturesEventHandlers&&(this.gesturesEventHandlers.$dispose(),this.gesturesEventHandlers=null),this._attachEventFn=null,e.$dispose.call(this)},createNode:function(){this.TYPE=this.tag;var a;"svg"===this.tag&&(this.nodeNS="http://www.w3.org/2000/svg"),a=this.nodeNS?d.createElementNS(this.nodeNS,this.tag):d.createElement(this.tag),this.node=a,this.refreshAttributes();var b,c=this.evtHandlers,e=void 0!==a.addEventListener;if(c||this.isInput){if(!e){var f=this;this._attachEventFn=function(a){f.handleEvent(a)}}var h={};if(c)for(var i=0,j=c.length;j>i;i++)b=c[i],g.isGesture(b.evtType)?(null==this.gesturesEventHandlers&&(this.gesturesEventHandlers=new g.Gestures),this.gesturesEventHandlers.startGesture(b.evtType,a,this)):(h[b.evtType]=!0,e?a.addEventListener(b.evtType,this,!1):a.attachEvent("on"+b.evtType,this._attachEventFn));if(this.isInput){var k,l=["click","keydown","keyup"];for(var m in l)k=l[m],h[k]||(e?a.addEventListener(k,this,!1):a.attachEvent("on"+k,this._attachEventFn))}}},handleEvent:function(a){var b=this.evtHandlers,c=a.type,d=null;if(this.isInput&&this.inputModelExpIdx){var e=this.eh.getExpr(this.inputModelExpIdx);if(e.setValue){var g=this.node.value,h=this.node.type;"checkbox"===h&&(g=this.node.checked),this._lastValue=g,e.setValue(this.vscope,g),f.refresh()}}if(b)for(var i=0,j=b.length;j>i;i++)if(b[i].evtType===c){d=b[i].executeCb(a,this.eh,this.vscope);break}return d===!1&&a.preventDefault(),d},refresh:function(){this.adirty&&this.refreshAttributes(),e.refresh.call(this)},refreshAttributes:function(){var a,b,c=this.node,d=this.atts,e=this.eh,f=this.vscope,g=null;if(this.adirty=!1,d)for(var h=0,i=this.atts.length;i>h;h++)if(a=d[h],!this.isInput||this.inputModelExpIdx||"value"!==a.name&&"#model"!==a.name||a.textcfg&&2===a.textcfg.length&&""===a.textcfg[0]&&(g||(g=[]),g[a.name]=a.textcfg[1]),b=a.name,b.match(/^#/)){if("#model"===b)continue}else"class"===b?this.nodeNS?c.setAttribute("class",a.getValue(e,f,"")):c.className=a.getValue(e,f,""):"value"===b?this.isInput&&"radio"!==c.type||(c.value=a.getValue(e,f,"")):c.setAttribute(a.name,a.getValue(e,f,null));if(this.htmlCbs)for(var j,h=0,i=this.htmlCbs.length;i>h;h++)j=this.htmlCbs[h],c.setAttribute("on"+j.evtType,j.htmlCb);if(g){var k=g["#model"];k||(k=g.value),k&&(this.inputModelExpIdx=k)}if(this.inputModelExpIdx){var l=this.eh.getExpr(this.inputModelExpIdx),m=""+l.getValue(f,this.eh,"");if("radio"===c.type){var n=""+c.value;c.checked=m===n}else if("checkbox"===c.type){var n=""+c.checked;m!==n&&(c.checked=!c.checked)}else this._lastValue!==m&&(c.value=m),this._lastValue=null}}});b.exports=h},{"hsp/document":"tRcUKa","hsp/gestures/gestures":"CmOFUj","hsp/klass":"V83taH","hsp/rt":"6dLxui","hsp/rt/tnode":"uKJF1q"}],"hsp/rt/exphandler":[function(a,b){b.exports=a("z0XsW6")},{}],z0XsW6:[function(a,b){var c=a("../klass"),d=a("../json"),e=c({$constructor:function(a){this.exps={};var b,c,d=null;for(var e in a)b=a[e],b.constructor===Array?(c=b[0],5===c?d=new f(b):0===c||1===c||2===c?d=new g(b):3===c||4===c?d=new h(b):6===c?d=new i(b,this):console.warn("Unsupported expression type: "+c),d&&(this.exps[e]=d)):console.warn("Unsupported expression definition: "+b)},getValue:function(a,b,c){return this.exps["e"+a].getValue(b,this,c)},getExpr:function(a){return this.exps["e"+a]}});b.exports=e;var f=c({$constructor:function(a){this.value=a[1]},getValue:function(){return this.value},getObservablePairs:function(){return null}}),g=c({bound:!1,$constructor:function(a){var b,c,d=a[0],e=a[1],f=2===d||4===d,g=[];f?(b=a[2],g=a.slice(3,e+2),c=e-1):(b="#scope",g=a.slice(2,e+2),c=e),this.bound=1===d,this.isLiteral=f,this.root=b,this.path=g,this.ppLength=c},getValue:function(a,b,c){var d=this.isLiteral?this.root:a[this.root],e=this.ppLength;if("undefined"==typeof d)return c;if(1===e)d=d[this.path[0]];else for(var f=this.path,g=0;e>g;g++)if(d=d[f[g]],void 0===d)return c;return void 0!==d?d:c},setValue:function(a,b){if(this.isLiteral&&this.ppLength<=0)console.warn("[DataRefExpr.setValue] Global literal values cannot be updated from the DOM - please use object referenes");else{var c=this.isLiteral?this.root:a[this.root],e=this.ppLength,f=!0;if(1>e)return;for(var g=0;e-1>g;g++)if(c=c[this.path[g]],void 0===c){f=!1;break}f&&d.set(c,this.path[e-1],b)}},getObservablePairs:function(a,b){if(!this.bound)return null;var c=this.ppLength;if(1>c)return null;var d=this.isLiteral?this.root:b[this.root];if(void 0===d)return null;if(1===c)return[[d,this.path[0]]];for(var e,f=[],g=this.path,h=0;c>h&&(e=g[h],f.push([d,e]),d=d[e],void 0!==d);h++);return f}}),h=c({$extends:g,$constructor:function(a){g.$constructor.call(this,a);var b=a[1]+2;this.args=a.length>b?a.slice(b):null},getFuncRef:function(a,b){var c=this.isLiteral?this.root:a[this.root],d=this.ppLength,e=null;if(!c)return b;if(1===d){if(e=c,c=c[this.path[0]],void 0===c)return b}else for(var f=this.path,g=0;d>g;g++)if(e=c,c=c[f[g]],void 0===c)return b;return{fn:c,scope:e,args:this.args}},getValue:function(a,b,c){var d=this.executeCb({},b,a);return void 0===d?c:d},executeCb:function(a,b,c){var d,e=this.getFuncRef(c,null);if(!e)return console.log("[hashspace event handler] Invalid callback context");if(d=e.fn,!d||d.constructor!==Function)return console.log("[hashspace event handler] Invalid callback function");var f=[],g=c.event;c.event=a;var h=this.args;if(h)for(var i=0,j=h.length;j>i;i+=2)0===h[i]?f.push(h[i+1]):f.push(b.getValue(h[i+1],c,null));return void 0===g?delete c.event:c.event=g,d.apply(e.scope,f)},getObservablePairs:function(a,b){var c=g.getObservablePairs.call(this,a,b);return c}}),i=c({$constructor:function(a,b){this.fn=a[1],this.eh=b;var c=a.length-2;this.args=c>0?a.slice(2):null},getValue:function(a,b,c){if(this.args){for(var d=[],e=0,f=this.args.length;f>e;e++)d[e]=this.eh.getValue(this.args[e],a,null);try{var g=this.fn.apply({},d);return g}catch(h){return c}}else try{return this.fn.call({})}catch(h){return c}},getObservablePairs:function(){return null}})},{"../json":"iVLrWG","../klass":"V83taH"}],"hsp/rt/tnode":[function(a,b){b.exports=a("uKJF1q")},{}],uKJF1q:[function(a,b){var c=a("hsp/rt"),d=a("hsp/klass"),e=a("./exphandler"),f=d({node:null,vscope:null,root:null,parent:null,children:null,childNodes:null,adirty:!1,cdirty:!1,htmlCbs:null,nodeNS:null,$constructor:function(a){this.isStatic=0===a,this.isStatic||(this.eh=new e(a))},$dispose:function(){var a=this.childNodes;if(a){for(var b=0,c=a.length;c>b;b++)a[b].$dispose();delete this.childNodes}this.htmlCbs=null,delete this.node,delete this.parent,delete this.root,delete this.vscope,delete this.children,delete this.atts,delete this.evtHandlers},createAttList:function(a,b){if(b){var c,d=[];for(var e in b)c=new i(e,b[e]),c.isHtmlCallback&&(this.htmlCbs||(this.htmlCbs=[]),this.htmlCbs.push(c)),d.push(c);this.evtHandlers=d}if(null===a||0===a)return null;var f,j=[];for(var e in a)a.hasOwnProperty(e)&&(f=a[e],null===f?j.push(new g(e,e)):"string"==typeof f?j.push(new g(e,f)):f.constructor===Array?j.push(new h(e,f)):console.log("[TNode] unsupported attribute: "+f));this.atts=j},onPropChange:function(){var a=this.root;this.adirty||(this.adirty=!0,this===a&&c.refresh.addTemplate(this));for(var b=this.parent;b;)b.cdirty?b=null:(b.cdirty=!0,b===a&&c.refresh.addTemplate(b),b=b.parent)},createNodeInstance:function(a){var b=d.createObject(this);if(b.vscope=a.vscope,b.parent=a,b.nodeNS=a.nodeNS,b.root=a.root,b.root.createExpressionObservers(b),this.isDOMless)b.node=b.parent.node;else if(b.createNode(),b.parent.node&&b.parent.node.appendChild(b.node),this.children){b.childNodes=[];for(var c=0,e=this.children.length;e>c;c++)b.childNodes[c]=this.children[c].createNodeInstance(b)}return b},refresh:function(){if(this.cdirty){var a=this.childNodes;if(a)for(var b=0,c=a.length;c>b;b++)a[b].refresh();this.cdirty=!1}},createNode:function(){},replaceNodeBy:function(a,b){if(a!==b&&this.node===a){this.node=b;var c=this.childNodes;if(c)for(var d=0,e=c.length;e>d;d++)c[d].replaceNodeBy(a,b)}}}),g=d({$constructor:function(a,b){this.name=a,this.value=b},getValue:function(){return this.value}}),h=d({$constructor:function(a,b){this.name=a,this.textcfg=b},getValue:function(a,b,c){var d=this.textcfg,e=d.length,f=[];if(2===e&&""===d[0])return a.getValue(d[1],b,c);for(var g=0;e>g;g++)g%2?f.push(a.getValue(d[g],b,c)):f.push(d[g]);return f.join("")}}),i=d({$constructor:function(a,b){this.evtType=a;var c="number"!=typeof b;c?(this.isHtmlCallback=!0,this.htmlCb=b):this.expIdx=b},executeCb:function(a,b,c){if(this.expIdx){var d=b.getExpr(this.expIdx);if(d)return d.executeCb(a,b,c)}}});b.exports.TNode=f,b.exports.TSimpleAtt=g,b.exports.TExpAtt=h},{"./exphandler":"z0XsW6","hsp/klass":"V83taH","hsp/rt":"6dLxui"}]},{},["6dLxui"]);